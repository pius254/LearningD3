for(var barData=[],i=0;100>i;i++)barData.push(Math.round(30*Math.random())+20);var colors=d3.scale.linear().domain([0,.33*barData.length,.66*barData.length,barData.length]).range(["green","salmon","orange","cyan"]),width=1e3,height=380,barWidth=50,barOffset=5,tempColor;barData.sort(function(t,a){return t-a});var yScale=d3.scale.linear().domain([0,d3.max(barData)]).range([0,height]),xScale=d3.scale.ordinal().domain(d3.range(0,barData.length)).rangeBands([0,width]),tooltip=d3.select("body").append("div").style("position","absolute").style("padding","0 10px").style("background","white").style("opacity",0),myChart=d3.select("#bChart").append("svg").attr("width",width).attr("height",height).append("g").selectAll("rect").data(barData).enter().append("rect").attr("width",xScale.rangeBand()).attr("height",0).attr("x",function(t,a){return xScale(a)}).attr("y",height).style("fill",function(t,a){return colors(a)}).on("mouseover",function(t){tooltip.transition().style("opacity",.9),tooltip.html(t).style("left",d3.event.pageX-35+"px").style("top",d3.event.pageY-30+"px"),tempColor=this.style.fill,d3.select(this).style("opacity",.5).style("fill","yellow")}).on("mouseout",function(){d3.select(this).style("opacity",1).style("fill",tempColor)});myChart.transition().attr("height",function(t){return yScale(t)}).attr("y",function(t){return height-yScale(t)}).delay(function(t,a){return 20*a}).duration(1e3).ease("elastic");